START:

CLS

BG 1
BG COPY 0,0,32,20 TO 0,0
SPRITE.A 0,2

PX=20
PY=100
BGX=0
SCORE=0

GAMEPAD 1

DO
 IF UP(0) AND PY>50 THEN PY=PY-1
 IF DOWN(0) AND PY<120 THEN PY=PY+1
 IF LEFT(0) AND PX>0 THEN PX=PX-1
 IF RIGHT(0) AND PX<152 THEN PX=PX+1
 SPRITE 0,PX,PY,1+(BGX/10 MOD 2)
 
 IF BGX MOD 80=0 THEN
  CX=(BGX+160)/8 MOD 32
  IF RND<0.5 THEN C=16 ELSE C=32
  ATTR 0
  CELL CX,7+RND*9,C
 END IF
 
 BGX=BGX+1
 SCROLL 1,BGX,0
 
 CX=(PX+BGX+4)/8 MOD 32
 CY=(PY+7)/8
 C=CELL.C(CX,CY)
 IF C=16 THEN GOTO GAMEOVER
 IF C=32 THEN
  ATTR 0
  CELL CX,CY,3
  SCORE=SCORE+10
  BG 0
  ATTR 3
  NUMBER 0,0,SCORE,5
  BG 1
 END IF
 
 WAIT VBL
LOOP

GAMEOVER:
BG 0
ATTR 3
TEXT 5,7,"GAME OVER"
DO
 IF BUTTON(0,0) THEN GOTO START
 WAIT VBL
LOOP


#1:MAIN PALETTES
0B0C0804003F2410003E0F10003F3F00
003F2A15003F2A15003F2A15003F2A15

#2:MAIN CHARACTERS
00000000000000000000000000000000
38380002002848663020303C30284800
38380000043030383020303838303020
0002000040040000FFFFFFFFFFFFFFFF
000055000000000044EEFFEEEEEEEEEE
080808FF010101FFFFFFFFFFFFFFFFFF
FFFFFFFFFFFFFFFFFF9999FF999999FF
0103070F1D3971FF0103070F1F3F7FFF
80C0E0F0381C0EFF80C0E0F0F8FCFEFF
3C3C3C3C3C3C7EFF3C3C3C3C3C3C7EFF
3C3C3C3C3C3C3C3C3C3C3C3C3C3C3C3C
FFDFF99FE9FFEFFFFFFFFFFFFFFFFFFF
00000000003C7EFF00000000003C7EFF
7F3E0000000000007F3E000000000000
00000000000000000000000000000000
00000000000000000000000000000000
003E7FFFFFFF7E3CFFFFFFFFFF7EBDC3
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
005CD454545C0000FFA32BABABA3FFFF
00EE2AEA8AEE0000FF11D5157511FFFF

#3:MAIN BG
00002010000000000000000000000000
00000000000000000000000000000000
0C000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000070108010000000000000C00
0B000000000000000000000000000000
00000000000000000000000000000000
0C0000000000000000000C0000000000
00000701050105010801000000000B00
0B000C00000000000000000000000000
00000000000000000000000000000C00
0B000C000000000000000B0000000000
07010501060106010501080100000B00
0B000B00000000000000000000000701
05010501080100010000000000000B00
0B000B000000000000000B0000000000
05010501050105010501050100000D00
0B000D00000000000000000007010501
05010501050108010000000000000B00
0B000D000000000000000B0000000000
05010601050105010601050100000000
0A010000000000000000000005010501
06010501060105010000000000000D00
0A010000040104010401090104010401
05010501050105010501050100000000
09010401040104010401040105010501
05010501050105010401040104010401
09010000030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300030003000300030003000300
03000300

